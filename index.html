<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myvt - Malaysian VTuber Imageboard</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- FIREBASE SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>

    <!-- HEADER -->
    <div class="header">
        <h1 id="boardTitle">Loading...</h1>
        
        <!-- Empty container: JS will inject the correct links here -->
        <div class="nav-boards" id="navBoards"></div>
        
        <div class="nav-site">
            [ <a href="#" onclick="window.location.hash=''; return false;">Home</a> ] 
            [ <a href="#catalog">Catalog</a> ] 
            [ <a href="#bottom">Bottom</a> ]
        </div>
    </div>

    <!-- POST FORM (Dynamic) -->
    <div class="post-box">
        <div class="form-header" id="formTitle">Create New Thread</div>
        <form id="postForm">
            <input type="text" id="nameInput" placeholder="Name (Anonymous)" value="Anonymous">
            <input type="text" id="subjectInput" placeholder="Subject">
            <textarea id="commentInput" placeholder="Comment" required></textarea>
            
            <!-- Updated Media Section -->
            <div style="display: flex; gap: 5px;">
                <input type="url" id="imageInput" placeholder="Media URL (Image/Video/X/YT)" style="flex-grow: 1;">
                <button type="button" id="uploadBtn" style="width: auto; padding: 0 10px; white-space: nowrap;">Upload Image</button>
            </div>
            <!-- Hidden File Input -->
            <input type="file" id="hiddenFileInput" accept="image/*" style="display: none;">
            
            <button type="submit">Submit Post</button>
        </form>
    </div>

    <hr>

    <!-- VIEW 1: BOARD INDEX (List of Threads) -->
    <div id="boardView">
        <div id="threadList"></div>
    </div>

    <!-- VIEW 2: SINGLE THREAD (OP + Replies) -->
    <div id="threadView" style="display:none;">
        <div class="back-link">[ <a href="#" onclick="window.location.hash=''; return false;">Return to Board</a> ]</div>
        <div id="opContainer"></div> <!-- The Main Post goes here -->
        <div id="repliesContainer"></div> <!-- The Replies go here -->
    </div>

    <!-- LIGHTBOX OVERLAY -->
    <div id="lightbox" onclick="closeLightbox(event)">
        <!-- Container to center content -->
        <div id="lightboxContent">
            <img id="lbImg" style="display:none">
            <video id="lbVideo" controls style="display:none"></video>
            <iframe id="lbFrame" frameborder="0" allowfullscreen style="display:none"></iframe>
        </div>
    </div>

    <!-- NSFW CONTENT GATE -->
    <div id="nsfwGate" style="display:none;">
        <div class="gate-box">
            <h2>⚠️ 18+ ADULT CONTENT WARNING</h2>
            <p>The board you are trying to access (/<span id="gateBoardName"></span>/) contains <b>Explicit Adult Content (NSFW)</b>.</p>
            <p>By clicking "Enter", you confirm that you are at least 18 years of age and consent to viewing such material.</p>
            <div class="gate-buttons">
                <button onclick="acceptNSFW()" class="btn-enter">I am 18+ / Enter</button>
                <button onclick="window.location.href='?b=myvt'" class="btn-exit">Take me back</button>
            </div>
        </div>
    </div>

    <!-- ADD THIS LINE HERE -->
    <div id="bottom"></div>

    <script src="script.js"></script>
</body>

</html>
